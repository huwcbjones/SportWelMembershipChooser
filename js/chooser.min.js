var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,f){if(b){c=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var d=a[f];d in c||(c[d]={});c=c[d]}a=a[a.length-1];f=c[a];b=b(f);b!=f&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,c){var b=this;b instanceof String&&(b=String(b));var d=b.length;for(c=c||0;c<d;c++)if(b[c]==a||Object.is(b[c],a))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,c){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,c||0)}},"es6","es3");var Chooser={data:{}};Chooser.data.payg={};
Chooser.data.membership={};var priceMap,membershipMap;Chooser.options={};Chooser.options.subscriptions={};Chooser.options.membershipType=null;Chooser.options.auTeam=null;Chooser.options.facilities=[];Chooser.options.frequency={};Chooser.history={};Chooser.history.currentPage="membership";Chooser.history.previousPage=null;
$(document).ready(function(){$("#membershipGroup").on("click","input[name=membership]",function(){Chooser.options.membershipType=this.value});$("#auTeamGroup").on("click","input[name=auTeam]",function(){Chooser.options.subscriptions.sp="1"===this.value;Chooser.options.auTeam="1"===this.value});$("#facilitiesGroup").on("click","input[name=facilities]",function(){var a=this.value;Chooser.data.getItem(a);var b=$("#freq-"+a);if(!0===$(this).prop("checked"))Chooser.options.facilities.push(a),Chooser.options.frequency[a]=
{time:0,peak:!1},b.removeClass("hidden");else{var c=Chooser.options.facilities.indexOf(a);-1<c&&Chooser.options.facilities.splice(c,1);null!==Chooser.options.frequency[a]&&delete Chooser.options.frequency[a];b.addClass("hidden")}b.on("click","input[type=radio]",function(){Chooser.options.frequency[a].time=this.value});b.on("click","input[type=checkbox]",function(){Chooser.options.frequency[a].peak=$(this).prop("checked")})})});
Chooser.init=function(){Chooser.data.getItem=function(a){var b=a.split("-");a=Chooser.data.payg[b[0]];if("undefined"===a)return null;b=a.index[b[1]];return"undefined"===b?null:a.items[b]};var a=$("#membershipTypes"),b;for(b in Chooser.data.membership)Chooser.data.membership.hasOwnProperty(b)&&"function"!==typeof Chooser.data.membership[b]&&a.append('<label class="checkbox">\n    <input type="radio" name="membership" value="'+b+'" id="membershipStudent" required/>\n'+Chooser.data.membership[b].display+
"\n</label>");a=$("#frequencyTable");var c=$("#facilities-jsc"),f=$("#facilities-rest");for(b in Chooser.data.payg)if(Chooser.data.payg.hasOwnProperty(b)){var d="jsc"===b?c:f;var g=Chooser.data.payg[b];g.index={};d.append("<h4>"+g.display+"</h4>");for(var h in g.items)if(g.items.hasOwnProperty(h)){var e=Chooser.data.payg[b].items[h];g.index[e.id]=h;var k="#facilities-"+b+"-"+e.id;if(0!==e.requires.type.length)$("#membershipGroup").on("click","input[name=membership]",{selector:k,requires:e.requires.type},
function(a){a.data.requires.includes(Chooser.options.membershipType)?$(a.data.selector).removeClass("hidden"):$(a.data.selector).addClass("hidden")});if(0!==e.excludes.type.length)$("#membershipGroup").on("click","input[name=membership]",{selector:k,excludes:e.excludes.type},function(a){a.data.excludes.includes(Chooser.options.membershipType)?$(a.data.selector).addClass("hidden"):$(a.data.selector).removeClass("hidden")});d.append('<label class="checkbox" id="facilities-'+b+"-"+e.id+'">\n  <input type="checkbox" name="facilities" value="'+
b+"-"+e.id+'">\n'+e.display+"\n</label>");a.append('<tr id="freq-'+b+"-"+e.id+'" class="hidden">\n  <th>'+e.display+'</th>\n  <td><input type="radio" name="frequency-'+b+"-"+e.id+'" value="1"/></td>\n  <td><input type="radio" name="frequency-'+b+"-"+e.id+'" value="12"/></td>\n  <td><input type="radio" name="frequency-'+b+"-"+e.id+'" value="26"/></td>\n  <td><input type="radio" name="frequency-'+b+"-"+e.id+'" value="52"/></td>\n  <td><input type="radio" name="frequency-'+b+"-"+e.id+'" value="365"/></td>\n  <td><input type="radio" name="frequency-'+
b+"-"+e.id+'" value="0" checked/></td>\n  <td><input type="checkbox" name="peak-'+b+"-"+e.id+'"/></td>\n</tr>')}d.append("<br />")}};Chooser.goToSportsTeams=function(){if(null===this.options.membershipType)$("#membershipGroup").addClass("has-error"),$("#membershipHelp").removeClass("hidden");else{$("#membershipGroup").removeClass("has-error");$("#membershipHelp").addClass("hidden");var a="sports-teams";"child"===this.options.membershipType&&(a="facilities");Chooser.swapPage(a)}};
Chooser.goToFacilities=function(){null===this.options.auTeam?($("#auTeamGroup").addClass("has-error"),$("#auHelp").removeClass("hidden")):($("#auTeamGroup").removeClass("has-error"),$("#auHelp").addClass("hidden"),Chooser.swapPage("facilities"))};Chooser.goToFrequency=function(){0===Chooser.options.facilities.length?Chooser.calculateResult():Chooser.swapPage("frequency")};
Chooser.swapPage=function(a){var b=Chooser.history.currentPage,c=$("#"+a+"-panel"),f=$("#"+b+"-panel"),d=$("#result");switch(a){case "sports-teams":"child"===Chooser.options.membershipType?"facilities"===b?$("#membership-panel").collapse("show"):$("#facilities-panel").collapse("show"):c.collapse("show");f.collapse("hide");break;case "results":d.fadeIn(500);default:"results"===b&&d.fadeOut(500),c.collapse("show"),f.collapse("hide")}Chooser.history.previousPage=b;Chooser.history.currentPage=a};
Chooser.calculateResult=function(){var a=Chooser.calculatePAYG(),b=a[0],c=a[1],f=b-c;a=Chooser.data.membership[Chooser.options.membershipType];var d=$("#resultType"),g=$("#resultPrice");$("#resultLink").attr("href",a.link);d.val(a.display);if("child"===Chooser.options.membershipType)Chooser.addInfo("Selected child membership...\n"),c=a.child.price,"month"===a.child.type&&(c*=12),b<=c?(Chooser.addInfo("PAYG is cheaper than child by \u00a3"+(c-b).toFixed(2)+"\n"),d.val(d.val()+" - PAYG"),g.val("\u00a3"+
b+" (estimated)"),Chooser._printSubscription(a.display,"Pay As You Go",b)):(Chooser.addInfo("Child is cheaper than PAYG by \u00a3"+(b-c).toFixed(2)+"\n"),d.val(d.val()+" - "+a.child.display),g.val("\u00a3"+a.child.price+" ("+a.child.type+"ly)"),Chooser.printSubscription(a,"child"));else{Chooser.selectAvailableSubscriptions();Chooser.addInfo("\n========================================\n");Chooser.addInfo("                AU Team                 \n");Chooser.addInfo("========================================\n");
Chooser.addInfo("Subscription requires AU use: "+(Chooser.options.auTeam?"Yes":"No")+"\n");var h=a.sp.price,e=a.ff.price,k=a.pp.price,l=a.wc.price;"month"===a.sp.type&&(h*=12);"month"===a.ff.type&&(e*=12);"month"===a.pp.type&&(k*=12);"month"===a.wc.type&&(l*=12);Chooser.addInfo("\n========================================\n");Chooser.addInfo("             Cost per Year              \n");Chooser.addInfo("========================================\n");Chooser.addInfo("Workout Central:  \u00a3"+l.toFixed(2)+
(!1===Chooser.options.subscriptions.wc?"*":"")+"\n");Chooser.addInfo("Sports Pass:      \u00a3"+h.toFixed(2)+(!1===Chooser.options.subscriptions.sp?"*":"")+"\n");Chooser.addInfo("Frequent Fitness: \u00a3"+e.toFixed(2)+(!1===Chooser.options.subscriptions.ff?"*":"")+"\n");Chooser.addInfo("Peak Performer:   \u00a3"+k.toFixed(2)+(!1===Chooser.options.subscriptions.pp?"*":"")+"\n");Chooser.addInfo(" * does not meet requirements\n");Chooser.options.auTeam&&(!0===Chooser.options.subscriptions.sp||h+f<=e&&
h+c<=k)?0===b?(d.val(d.val()+" - "+a.sp.display),g.val("\u00a3"+a.sp.price+" ("+a.sp.type+"ly)"),Chooser.printSubscription(a,"sp")):(d.val(d.val()+" - "+a.sp.display+" + PAYG"),g.val("\u00a3"+a.sp.price+" ("+a.sp.type+"ly) - \u00a3"+b+" (estimated PAYG)"),Chooser.printSubscription(a,"sp",b)):(console.log(b),console.log(c),h=Chooser.calculateWCPAYG(b,c),f=h[0],h=h[1],!0===Chooser.options.subscriptions.wc&&l+(f-h)<=e&&l+h<=k?(0===f?(d.val(d.val()+" - "+a.wc.display),g.val("\u00a3"+a.wc.price+" ("+a.wc.type+
"ly)")):(d.val(d.val()+" - "+a.wc.display+" + PAYG"),g.val("\u00a3"+a.wc.price+" ("+a.wc.type+"ly) - \u00a3"+f+" (estimated PAYG)")),Chooser.printSubscription(a,"wc")):k<=e+c?(d.val(d.val()+" - "+a.pp.display),g.val("\u00a3"+a.pp.price+" ("+a.pp.type+"ly)"),Chooser.printSubscription(a,"pp")):e<=b?0!==c?(d.val(d.val()+" - "+a.ff.display+" + PAYG"),g.val("\u00a3"+a.ff.price+" ("+a.ff.type+"ly) - \u00a3"+c+" (estimated PAYG)"),Chooser.printSubscription(a,"ff",c)):(d.val(d.val()+" - "+a.ff.display),g.val("\u00a3"+
a.ff.price+" ("+a.ff.type+"ly)"),Chooser.printSubscription(a,"ff")):(d.val(d.val()+" - Pay As You Go"),g.val("\u00a3"+b+" (estimated PAYG)"),Chooser._printSubscription(a.display,"Pay As You Go",b)))}Chooser.swapPage("results")};
Chooser._printSubscription=function(a,b,c){Chooser.addInfo("\n========================================\n");Chooser.addInfo("      Best Membership/Subscription      \n");Chooser.addInfo("========================================\n");Chooser.addInfo(" Membership:    "+a+"\n");Chooser.addInfo(" Subscription:  "+b+"\n");Chooser.addInfo(" \u00a3/year (est):  \u00a3"+("      "+c.toFixed(2)).slice(-6)+"\n");Chooser.addInfo(" \u00a3/month (est): \u00a3"+("      "+(c/12).toFixed(2)).slice(-6)+"\n")};
Chooser.printSubscription=function(a,b,c){void 0!==c?Chooser._printSubscription(a.display,a[b].display+" + PAYG",a[b].price+c):(c=a[b].price,"month"===a[b].type&&(c*=12),Chooser._printSubscription(a.display,a[b].display,c))};
Chooser.selectAvailableSubscriptions=function(){var a;Chooser.options.subscriptions={wc:!0,sp:!0,ff:!0,pp:!0};for(var b in Chooser.options.facilities){var c=Chooser.data.getItem(Chooser.options.facilities[b]);if(0!==c.excludes.length)for(a in c.excludes.sub)c.excludes.sub.hasOwnProperty(a)&&(Chooser.options.subscriptions[c.excludes.sub[a]]=!1);if(0!==c.requires.length)for(a in c.requires.sub)c.requires.sub.hasOwnProperty(a)&&(Chooser.options.subscriptions[c.requires.sub[a]]=!0)}Chooser.options.auTeam?
Chooser.options.subscriptions.wc=!1:Chooser.options.subscriptions.sp=!1};Chooser.calculateWCPAYG=function(a,b){if(-1!==Chooser.options.facilities.indexOf("may-gym")){var c=Chooser.data.getItem("may-gym");c=c.price*Chooser.options.frequency["may-gym"].time;0!==a&&(a-=c);0!==b&&(b-=c)}-1!==Chooser.options.facilities.indexOf("may-classes")&&(c=Chooser.data.getItem("may-classes"),c=c.price*Chooser.options.frequency["may-classes"].time,0!==a&&(a-=c),0!==b&&(b-=c));return[a,b]};
Chooser.calculatePAYG=function(){Chooser.addInfo("========================================\n");Chooser.addInfo("           Pay As You Go Cost           \n");Chooser.addInfo("========================================\n");var a=0,b=0,c;for(c in Chooser.options.frequency)if(Chooser.options.frequency.hasOwnProperty(c)){var f=Chooser.data.getItem(c),d=Chooser.options.frequency[c];var g=f.price*d.time;a+=g;d.peak&&(b+=g);var h=":    ";if(25>f.display.length)for(i=0;i<25-f.display.length;i++)h+=" ";else h=
"...: ";Chooser.addInfo(" "+f.display.substring(0,25)+h+"\u00a3"+("       "+g.toFixed(2)).slice(-7)+(d.peak?"*":"")+"\n");if(0!==f.excludes.sub.length)for(var e in f.excludes.sub)Chooser.options.subscriptions[f.excludes.sub[e]]=!1;if(0!==f.requires.sub.length){for(e in Chooser.options.subscriptions)Chooser.options.subscriptions.hasOwnProperty(e)&&(Chooser.options.subscriptions[e]=!1);for(e in f.requires.sub)Chooser.options.subscriptions[f.requires.sub[e]]=!0}}Chooser.addInfo(" * indicates peak time\n");
Chooser.addInfo("\nSubtotal:\n");Chooser.addInfo(" Off Peak: \u00a3"+("       "+(a-b).toFixed(2)).slice(-7)+"\n");Chooser.addInfo(" On Peak:  \u00a3"+("       "+b.toFixed(2)).slice(-7)+"\n");Chooser.addInfo("Total:     \u00a3"+("       "+a.toFixed(2)).slice(-7)+"\n");return[a,b]};Chooser.additionalInfo=$("#additionalInfo");Chooser.addInfo=function(a){Chooser.additionalInfo.append(a)};var loadingTimer=setTimeout(loadingStatus,250);
function loadingStatus(){var a=$("#loading");3===a.text().length?a.text(""):a.text(a.text()+".");loadingTimer=setTimeout(loadingStatus,250)}$.getJSON("data.json",function(a){console.log("Loaded data!");Chooser.data=a;$("#loadingStatus").remove();clearInterval(loadingTimer);Chooser.init()});
